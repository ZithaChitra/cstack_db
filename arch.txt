How does a database work ?

- what format is data saved in ? (in memory and on disk)
- when does it move from memory to disk ?
- why can there only be one primary key per table ?
- how does rolling back a transaction work ?
- how are indexes formatted ?
- when and how does a full table scan happen ?
- what format is a prepared statemant saved in ?

"what i can not create i do not understand." - Richard Feynman

***************************************************************
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


a query goes through a chain of components in order to retrieve
or modify data.

__front end__
1. tokenizer
2. parser
3. code genertaor

the input to the front-end is a SQL query. the output is sqlite
virtual machine bytecode (essentially a compiled program that can 
operate on the database).

__back end__
1. virtual machine
2. b-tree
3. pager
4. os interface

__virtual machine
    the virtual machine takes byte code generated by the front-end as 
    instructions. It can then perform operations on one or more tables
    or indexes, each of which is stored in a data strcure called a 
    B-tree. The VM is essentially a big switch statement on the 
    type of bytecode instruction.

__B tree
    consists of many nodes. Each node is one page in length. The B tree
    can retrieve a page from disk or save it back to disk by issuing 
    commands to the pager.


__pager
    the pager recieves instructions to read or write pages of data. It is
    responsible for reading/writing at appropriate offsets in the database
    file. It also keeps a cache of recently-accessed pages in memory, and 
    determines when those pages need to be written back to disk.

__os interface
    the os layer is the layer that differs depending on which operating 
    system sqlite was compiled for .

